# 데이터 베이스와 아키텍처 구성 - 견고하고 고속의 시스템을 구축하기 위해



## Django에서 Sqlite3를 사용할 때를 회상해보면...



- 매우 끔찍하다. DB 자체에 대해 깊이 있는 지식이 없다보니, DB를 지우고 다시 Makemigrations를 해달라는 안내를 수강생들에게 했었다.
- Django나 ROR에서는 sqlite3를 기본 데이터 베이스로 제공하고 있고, 이 데이터 베이스는 사용자가 GUI 내에서 쉽게 삭제하고 설치하게끔 고안된 소프트웨어이기는 하다.
- 그러나 어느 DBMS가 사용화된 서비스에서 이런 위험천만한 행위를 용납하겠는가?
- `데이터베이스는 견고해야한다`가 이 책에서 이야기하는 첫번째 내용이고, 이를 뒷받침하기 위해 데이터베이스를 다중화시킨다고 한다. 
- 과거에서부터 오늘날까지 데이터베이스를 견고하게 하기 위해 여러가지 아키텍처에 관한 모델들이 제시되어 있고, 현재 보편적으로 받아들여지고 있는 것은 `Web 3계층`이라는 구성이다.

- 이는 즉, Client - Internet - [Web Server(예를 들어, Apache, IIS등이 있고), Application Server(Tomcat, WebLogic, WebSphere 등), 그리고 DB Server로 구성된다] 형태로 짜여진다.
- 보안과 동시다발적인 다수 사용자의 요청, 그리고 속도를 개선한 설계로 많이 받아들여지는데, 다음 세대 데이터 베이스 설계는 어떤 것이 받아들여질까?



## 클러스터에 관한 개념 설명

- 클러스트란 포도 송이처럼 '송이'라는 개념으로 받아들여지는데, 이는 곧 `동일한 기능의 컴포넌트를 복수 개 준비해 한 개의 기능을 실현한다`라는 의미로 풀이한다.
- 어려울 것이 없는 것이, EC2를 AWS에서 사용해 배포할 때도 사용자가 증가하면 오토 스케일링을 통해 동일한 기능을 동작하는 서버 컴퓨터 대수를 증가시킨다. 이는 웹 뿐만 아니라 데이터베이스에서도 동일한 기능으로 작업되는 로직인 것 같다. 



다만, 서버의 가용률과 관련한 재미있는 표가 제시되는데,

|  가용률  | 서비스 정지 시간 |
| :------: | :--------------: |
|   99%    | 3일 15시간 36분  |
|  99.9%   |    8시간 46분    |
|  99.99%  |    52분 34초     |
| 99.999%  |     5분 15초     |
| 99.9999% |       32초       |

우리가 생각하는 99%는 상당히 높은 수치의 확률이라 생각되지만, 시스템 세계에서 99%는 그닥 높은 수치가 아니다. 특히 1년 동안 1% 만큼 오류가 발생한다 가정하면 1년 중 3일 15시간 36분 동안 서버가 정지될 수도 있다는 의미를 내포한다.



100%를 만드는 것은 불가능하겠지만, 최대한 100%에 가까운 수치의 가용률을 제작해야 서버에서 에러를 발생시킬 확률이 줄어든다는 뜻이다.